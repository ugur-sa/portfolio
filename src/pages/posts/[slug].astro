---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Prose from '../../components/Prose.astro';

export const getStaticPaths = async () => {
	const posts = await getCollection('posts');
	const paths = posts.map((posts: CollectionEntry<'posts'>) => ({
		params: {
			slug: posts.slug
		},
		props: {
			posts
		}
	}));
	return paths;
};

type Props = {
	posts: CollectionEntry<'posts'>;
};

const { posts } = Astro.props;
const { Content } = await posts.render();
---

<Layout title={`Blog | ${posts.data.title}`}>
	<Prose>
		<Content />
	</Prose>
</Layout>
