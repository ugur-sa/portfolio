---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Prose from '../../components/Prose.astro';
import { Image } from 'astro:assets';

export const getStaticPaths = async () => {
	const projects = await getCollection('projects');
	const paths = projects.map((project: CollectionEntry<'projects'>) => ({
		params: {
			slug: project.slug
		},
		props: {
			project
		}
	}));
	return paths;
};

type Props = {
	project: CollectionEntry<'projects'>;
};

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title={`Projects | ${project.data.title}`}>
	<div class="mb-8">
		<span class="mb-4 flex items-center gap-4"
			><h1 class="text-3xl font-bold">{project.data.title}</h1>{
				project.data.image !== null && (
					<Image
						src={project.data.image}
						alt={project.data.title}
						width={50}
						height={50}
						class={'rounded-full'}
					/>
				)
			}</span
		>
		<p class="text-sm font-light text-zinc-400">
			Published {new Date(project.data.date).toLocaleDateString('de-DE')}
		</p>
	</div>
	<Prose>
		<Content />
	</Prose>
</Layout>
